<!-- Please do not make any changes here, this file is generated by Puppet -->

<Server port="${tomcat.internalserver.port}" shutdown="SHUTDOWN">

  <Listener className="de.hybris.tomcat.HybrisGlobalResourcesLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.JmxRemoteLifecycleListener" rmiRegistryPortPlatform="${tomcat.jmx.port}" rmiServerPortPlatform="${tomcat.jmx.server.port}" />

  <GlobalNamingResources>
  </GlobalNamingResources>

  <Service name="Catalina" >
    <Executor
      name="hybrisExecutor"
      namePrefix="hybrisHTTP"
      maxThreads="${tomcat.maxthreads}"
      minSpareThreads="${tomcat.minsparethreads}"
      maxIdleTime="${tomcat.maxidletime}"
    />

    <Connector
      port="${tomcat.http.port}"
      maxHttpHeaderSize="8192"
      maxThreads="${tomcat.maxthreads}"
      protocol="org.apache.coyote.http11.Http11Protocol"
      executor="hybrisExecutor"
      enableLookups="false"
      acceptCount="100"
      connectionTimeout="20000"
      URIEncoding="UTF-8"
      disableUploadTimeout="true"
    />

    <Connector
      port="${tomcat.ssl.port}"
      maxHttpHeaderSize="8192"
      maxThreads="150"
      protocol="org.apache.coyote.http11.Http11Protocol"
      executor="hybrisExecutor"
      enableLookups="false"
      acceptCount="${tomcat.acceptcount}"
      connectionTimeout="20000"
      disableUploadTimeout="true"
      URIEncoding="UTF-8"
      SSLEnabled="true"
      scheme="https"
      secure="true"
      clientAuth="false"
      ciphers="TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_RC4_128_SHA,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA,SSL_RSA_WITH_RC4_128_SHA"
      useServerCipherSuitesOrder="true"
      sslEnabledProtocols="TLSv1.1,TLSv1.2"
      keystoreFile="${catalina.home}/lib/keystore"
      keystorePass="123456"
    />


    <Connector protocol="AJP/1.3" port="${tomcat.ajp.port}" proxyPort="${proxy.http.port}" redirectPort="${proxy.ssl.port}" URIEncoding="UTF-8" connectionTimeout="30000" />
    <Connector protocol="AJP/1.3" port="${tomcat.ajp.secureport}" proxyPort="${proxy.ssl.port}" scheme="https" secure="true" URIEncoding="UTF-8"  connectionTimeout="30000" />

    <Engine name="Catalina" defaultHost="localhost" jvmRoute="app${cluster.id}">
      <Valve
        className="org.apache.catalina.valves.AccessLogValve"
        directory="${HYBRIS_LOG_DIR}/tomcat"
        prefix="access"
        suffix=".log"
        rotatable="false"
        pattern="combined"
      />

      <Host
        name="localhost"
        appBase="webapps"
        unpackWARs="true"
        autoDeploy="false"
      >

	    ${tomcat.webapps}    
        
      </Host>
    </Engine>

  </Service>

</Server>

